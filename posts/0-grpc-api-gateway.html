<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Peyman Mortazavi - Seasoned Software Engineer",
        "url": "https://peymanmo.com/"
      }
    </script>
	
		<link href="../_app/immutable/assets/0.hcY1DwL7.css" rel="stylesheet">
		<link href="../_app/immutable/assets/5.DciVjBd_.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.DeGCcRkJ.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CXPqUDi0.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DZ1eoBPO.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BAyQ-u7M.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Db2s9hl6.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Ke4v9qem.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.CzR9BrzO.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/ueBXiI6S.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DsnmJJEf.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/7DGMFK_8.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CySC437j.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CJuPPkjl.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.BgXWGLOD.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CSzx4h4e.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Bfa8hKEb.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/5.Bb_iWluQ.js"><!--[--><link rel="icon" href="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='107'%20height='128'%20viewBox='0%200%20107%20128'%3e%3ctitle%3esvelte-logo%3c/title%3e%3cpath%20d='M94.157%2022.819c-10.4-14.885-30.94-19.297-45.792-9.835L22.282%2029.608A29.92%2029.92%200%200%200%208.764%2049.65a31.5%2031.5%200%200%200%203.108%2020.231%2030%2030%200%200%200-4.477%2011.183%2031.9%2031.9%200%200%200%205.448%2024.116c10.402%2014.887%2030.942%2019.297%2045.791%209.835l26.083-16.624A29.92%2029.92%200%200%200%2098.235%2078.35a31.53%2031.53%200%200%200-3.105-20.232%2030%2030%200%200%200%204.474-11.182%2031.88%2031.88%200%200%200-5.447-24.116'%20style='fill:%23ff3e00'/%3e%3cpath%20d='M45.817%20106.582a20.72%2020.72%200%200%201-22.237-8.243%2019.17%2019.17%200%200%201-3.277-14.503%2018%2018%200%200%201%20.624-2.435l.49-1.498%201.337.981a33.6%2033.6%200%200%200%2010.203%205.098l.97.294-.09.968a5.85%205.85%200%200%200%201.052%203.878%206.24%206.24%200%200%200%206.695%202.485%205.8%205.8%200%200%200%201.603-.704L69.27%2076.28a5.43%205.43%200%200%200%202.45-3.631%205.8%205.8%200%200%200-.987-4.371%206.24%206.24%200%200%200-6.698-2.487%205.7%205.7%200%200%200-1.6.704l-9.953%206.345a19%2019%200%200%201-5.296%202.326%2020.72%2020.72%200%200%201-22.237-8.243%2019.17%2019.17%200%200%201-3.277-14.502%2017.99%2017.99%200%200%201%208.13-12.052l26.081-16.623a19%2019%200%200%201%205.3-2.329%2020.72%2020.72%200%200%201%2022.237%208.243%2019.17%2019.17%200%200%201%203.277%2014.503%2018%2018%200%200%201-.624%202.435l-.49%201.498-1.337-.98a33.6%2033.6%200%200%200-10.203-5.1l-.97-.294.09-.968a5.86%205.86%200%200%200-1.052-3.878%206.24%206.24%200%200%200-6.696-2.485%205.8%205.8%200%200%200-1.602.704L37.73%2051.72a5.42%205.42%200%200%200-2.449%203.63%205.79%205.79%200%200%200%20.986%204.372%206.24%206.24%200%200%200%206.698%202.486%205.8%205.8%200%200%200%201.602-.704l9.952-6.342a19%2019%200%200%201%205.295-2.328%2020.72%2020.72%200%200%201%2022.237%208.242%2019.17%2019.17%200%200%201%203.277%2014.503%2018%2018%200%200%201-8.13%2012.053l-26.081%2016.622a19%2019%200%200%201-5.3%202.328'%20style='fill:%23fff'/%3e%3c/svg%3e"/><!--]--><!--[--><meta name="description" content="Bridging the Gap Between REST and gRPC"/><!--]--><title>gRPC API Gateway</title>
</head>

<body data-sveltekit-preload-data="hover">
	<div style="display: contents"><!--[--><!--[--><!----><div class="bg-background-200 w-screen h-screen relative overflow-hidden"><!--[!--><!--]--><!----> <div class="absolute inset-0 flex flex-col"><div class="flex flex-row h-16 flex-shrink-0"><div class="gap svelte-10dujo8"></div> <div class="flex flex-row h-full flex-1 items-center justify-around md:justify-start mx-4 gap-6"><a href="/" class="text-2xl">info</a> <a href="/resume" class="text-2xl">resume</a> <a href="/opensource" class="text-2xl">open source</a> <a href="/posts" class="text-2xl">posts</a></div> <div class="gap svelte-10dujo8"></div></div> <div class="flex flex-row flex-1 overflow-hidden"><div class="gap svelte-10dujo8"></div> <div class="flex-1 overflow-hidden"><div class="flex flex-col relative h-full overflow-x-hidden z-20 flex-1 overflow-scroll"><!----><div class="p-2 pr-4 md:p-4 lg:p-6 xl:p-12 font-mono"><span class="text-xl md:text-2xl lg:text-3xl xl:text-4xl font-bold">gRPC API Gateway</span> <br/> <div class="flex md:items-center justify-between flex-col md:flex-row"><span class="text-lg lg:text-xl xl:text-2xl">Bridging the Gap Between REST and gRPC</span> <span class="xl:text-xl">August 29, 2025</span></div></div> <div id="post-container" class="p-2 pt-6 md:p-4 lg:p-6 xl:p-12 md:pt-0 md:text-justify xl:text-xl font-[Dosis]"><!----><p>In the rapidly evolving landscape of API development, finding the optimal balance between performance, usability, and developer experience remains a persistent challenge. Over the past several years, gRPC has emerged as a powerful solution, gaining traction for its exceptional performance characteristics, strongly-typed Interface Definition Language (IDL), and cross-language code generation capabilities.</p> <h2>The Rise of gRPC in Modern Architecture</h2> <p>Since its introduction approximately five years ago, gRPC has become increasingly prevalent in:</p> <ul><li><strong>Microservices ecosystems</strong> requiring efficient inter-service communication</li> <li><strong>Real-time applications</strong> with stringent latency requirements</li> <li><strong>Polyglot environments</strong> spanning multiple programming languages</li> <li><strong>Mobile applications</strong> connecting to backend services (reducing battery consumption and bandwidth usage)</li> <li><strong>IoT deployments</strong> with constrained computing resources</li></ul> <p>gRPC’s popularity stems from three core strengths:</p> <ol><li>Its high-performance binary protocol based on HTTP/2</li> <li>Protocol Buffers as a language-agnostic IDL</li> <li>Native support for streaming communication patterns</li></ol> <h2>Protocol Buffers: A Superior Source of Truth</h2> <p>Beyond the performance advantages, Protocol Buffers (protobuf) as an IDL offers compelling benefits over traditional API definition approaches:</p> <ol><li><p><strong>Unified Source of Truth</strong>: Protocol Buffers serve as the canonical definition for APIs, eliminating the need to maintain separate documentation or interface definitions. This single-source approach ensures consistency between implementation, documentation, and client SDKs, reducing the risk of discrepancies that commonly occur when definitions are scattered across multiple artifacts.</p></li> <li><p><strong>Comprehensive Type Safety</strong>: Protobuf enforces strict typing and field validation at the definition level, shifting error detection from runtime to compile time.</p></li> <li><p><strong>Multi-language Code Generation</strong>: A single protobuf definition generates consistent client and server code across languages (Go, Java, Python, TypeScript, etc.), ensuring uniform implementation throughout your stack.</p></li> <li><p><strong>API Evolution by Design</strong>: Protobuf’s forward and backward compatibility rules provide clear guidelines for evolving APIs without introducing breaking changes.</p></li> <li><p><strong>Developer-friendly Syntax</strong>: Compared to verbose JSON/YAML OpenAPI specifications, protobuf offers a concise, readable syntax for defining services and messages.</p></li></ol> <h2>The gRPC Challenge: External Accessibility</h2> <p>Despite its advantages for internal service communication, IoT devices and mobile clients, gRPC presents challenges for:</p> <ol><li><strong>Web browsers</strong> lacking native gRPC support</li> <li><strong>External API consumers</strong> accustomed to REST/JSON interfaces</li> <li><strong>Legacy systems</strong> with REST-based integration patterns</li> <li><strong>API development teams</strong> using REST-oriented tools and workflows</li></ol> <p>These limitations created a need for solutions that could expose gRPC services via REST interfaces while maintaining the benefits of the gRPC ecosystem.</p> <h2>gRPC Gateway: The Original Bridge</h2> <p>gRPC Gateway is an open-source project that serves as a protocol translator between HTTP/JSON and gRPC. It was developed to solve a common challenge in modern microservice architectures: how to leverage gRPC’s high-performance benefits for internal service communication while still providing accessible REST APIs for external clients.</p> <p>At its core, gRPC Gateway generates a reverse-proxy server that translates RESTful HTTP API calls into gRPC requests. This is accomplished through protocol buffer annotations that define how your gRPC service methods map to RESTful endpoints and JSON structures.</p> <p><img src="/grpc-api-gateway.svg" alt="gRPC API Gateway"/></p> <h2>gRPC API Gateway: The Next Evolution</h2> <p>While the original gRPC Gateway project offered an excellent solution to the gRPC-REST bridging problem, the <a href="https://github.com/meshapi/grpc-api-gateway" rel="nofollow">gRPC API Gateway</a> project takes this foundation and builds upon it with significant improvements and modern features.</p> <p>gRPC API Gateway differentiates itself in several key areas:</p> <h3>1. Enhanced Configuration Flexibility</h3> <p>gRPC API Gateway offers extensive control over API endpoint behavior, allowing for:</p> <ul><li>Enabling or disabling query parameters</li> <li>Using aliases for query parameters</li> <li>Renaming path parameters</li> <li>Fine-tuning tags, operation names, examples, custom fields, and more in OpenAPI</li> <li>Managing streaming modes (WebSocket, SSE, and Chunked-Transfer)</li> <li>Precise control over requiredness and nullability, leading to more accurate OpenAPI documentation</li> <li>Utilizing global and relative external configuration files (YAML or JSON) as an alternative to proto file annotations</li></ul> <h3>2. Modern OpenAPI Support</h3> <p>The gateway generates OpenAPI 3.1 specifications that:</p> <ul><li>Provide precise JSON Schema constraints for better validation and documentation</li> <li>Support intricate data structures and polymorphism, enhancing flexibility</li> <li>Seamlessly integrate with contemporary API development tools</li> <li>Optimize model generation by including only those models used in at least one HTTP endpoint, thereby eliminating superfluous models</li></ul> <h3>3. Comprehensive Documentation</h3> <p>A key feature of gRPC API Gateway is its extensive and user-friendly documentation. This makes it significantly easier for development teams to understand, adopt, and implement the solution effectively, reducing the learning curve and accelerating integration.</p> <h3>4. Robust Error Handling</h3> <p>The gateway provides a sophisticated error handling mechanism that generates errors with a distinct structure, separate from gRPC service errors. This clear separation allows for greater flexibility in implementing custom error management strategies, ensuring that error responses are both meaningful and actionable for external API consumers.</p> <h3>5. Extended Streaming Support</h3> <p>gRPC API Gateway enhances streaming capabilities by supporting:</p> <ul><li><strong>Server-Sent Events (SSE)</strong>: Enables server-to-client streaming over HTTP using the EventSource API, providing a standardized method for receiving push notifications from servers. This simplifies the implementation of real-time updates and notifications in web applications without the complexity of WebSocket setup.</li> <li><strong>WebSocket Integration</strong>: Offers full support for bidirectional communication through WebSockets, facilitating true real-time applications with persistent connections. This effectively bridges gRPC’s bidirectional streaming capabilities to web clients that cannot directly use gRPC.</li></ul> <h2>Technical Architecture: How It Works</h2> <p>gRPC API Gateway operates through two distinct phases: code generation and HTTP endpoint registration at runtime.</p> <h3>1. Code Generation Phase</h3> <p>During the code generation phase, gRPC API Gateway protoc plug-ins perform the following tasks:</p> <ol><li><p><strong>Analyze Protocol Definitions</strong>:</p> <ul><li>Process service definitions and method signatures</li> <li>Examine message structures and field properties</li> <li>Parse annotations and configuration files</li> <li>Create mapping specifications between HTTP routes and gRPC methods</li></ul></li> <li><p><strong>Generate Handler Code</strong>:</p> <ul><li>Produce Go code for HTTP request handling</li> <li>Produce OpenAPI documentation</li></ul></li></ol> <pre class="language-go"><!----><code class="language-go"><span class="token comment">// Simplified example of generated handler code, this is not the actual code.</span>
<span class="token keyword">func</span> <span class="token function">HandleGetUser</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">,</span> pathParams gateway<span class="token punctuation">.</span>Params<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Determine the appropriate marshaller for the request, defaulting to JSON.</span>
    inMarshaller<span class="token punctuation">,</span> outMarshaller <span class="token operator">:=</span> mux<span class="token punctuation">.</span><span class="token function">MarshallerForRequest</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>

    <span class="token comment">// Extract the user ID from the path parameters.</span>
    userID <span class="token operator">:=</span> pathParams<span class="token punctuation">[</span><span class="token string">"user_id"</span><span class="token punctuation">]</span>

    <span class="token comment">// Construct the gRPC request.</span>
    <span class="token comment">// Omitted parsing from the body for simplicity.</span>
    req <span class="token operator">:=</span> <span class="token operator">&amp;</span>pb<span class="token punctuation">.</span>GetUserRequest<span class="token punctuation">&#123;</span>
        UserId<span class="token punctuation">:</span> userID<span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// Call the gRPC service.</span>
    resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">GetUser</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> req<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// Handle the error using the gateway mux, allowing for custom error handling.</span>
        mux<span class="token punctuation">.</span><span class="token function">HTTPError</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> outMarshaller<span class="token punctuation">,</span> w<span class="token punctuation">,</span> r<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// Marshal and forward the response to the HTTP client.</span>
    mux<span class="token punctuation">.</span><span class="token function">ForwardResponseMessage</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> outMarshaller<span class="token punctuation">,</span> w<span class="token punctuation">,</span> resp<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code><!----></pre> <h5>How would it work for streaming modes?</h5> <p>Each streaming mode has its nuances, but the general approach for handling long-lived connections remains consistent:</p> <ol><li><p><strong>Request Processing</strong>: When a WebSocket or SSE request arrives, the gateway:</p> <ul><li>Upgrades the connection in the case of WebSocket (handled by user code)</li> <li>Creates a streaming client to the gRPC server</li> <li>Utilizes separate goroutines for sending and receiving messages</li> <li>For each message received from the HTTP client, constructs the corresponding Protocol Buffer message and sends it to the gRPC server</li> <li>For each message received from the gRPC server, converts it back to JSON (or the appropriate format for the requested content type) and sends it to the HTTP client.</li></ul></li></ol> <h3>2. Runtime Registration &amp; Serving HTTP Traffic</h3> <p>In this phase, you utilize the generated HTTP handlers to manage HTTP traffic. gRPC API Gateway offers a lightweight HTTP handler compatible with the standard library’s <code>http</code> package to serve HTTP requests.</p> <p>During this stage, developers can tailor various behaviors, including:</p> <ul><li><strong>Error Translation</strong>: Customize the structure of HTTP errors or implement different error handling strategies.</li> <li><strong>Custom Marshallers</strong>: Implement custom marshallers for various content types, such as XML or YAML.</li> <li><strong>WebSocket Connection Upgrades</strong>: Manage WebSocket connection upgrades to support real-time communication.</li> <li><strong>Header to Metadata Mapping</strong>: Customize the mapping of HTTP headers to gRPC metadata.</li></ul> <p>The <em>Gateway</em> centralizes common elements of the reverse proxy, utilizing the generated HTTP handlers to handle the specific translations required for different endpoints and service calls.</p> <h2>Quick Start Guide</h2> <p>Let’s dive in and create a simple gRPC service. We’ll then use the gRPC API Gateway to generate a reverse proxy for serving HTTP requests and produce OpenAPI documentation.</p> <p>If you’d prefer to see this in action using a Docker container or explore more examples (including WebSocket and SSE), check out the <a href="https://github.com/meshapi/grpc-api-gateway-example" rel="nofollow">gRPC API Gateway Example</a>. Otherwise, follow the step-by-step guide below.</p> <h3>Prerequisites</h3> <p>Before we begin, ensure you have the following tools installed:</p> <ol><li><strong><code>protoc</code> Compiler</strong>: Follow the installation instructions <a href="https://protobuf.dev/installation/" rel="nofollow">here</a>.</li> <li><strong><code>buf</code></strong>: A helpful tool for working with <code>protoc</code>. Installation instructions are available <a href="https://buf.build/docs/cli/installation/" rel="nofollow">here</a>.</li> <li><strong>Go Plugins</strong>: <ul><li><code>Go Proto Plug-in</code>: Generates Go models from proto files.</li> <li><code>gRPC Go Proto Plug-in</code>: Generates Go server and client stubs.</li> <li><code>gRPC API Gateway Plug-in</code>: Generates the HTTP reverse proxy.</li> <li><code>gRPC OpenAPI 3.1 Plug-in</code> (Optional): Generates OpenAPI documentation.</li></ul></li></ol> <p>You can install the Go plugins using the following commands:</p> <pre class="language-sh"><!----><code class="language-sh">go <span class="token function">install</span> google.golang.org/protobuf/cmd/protoc-gen-go@latest
go <span class="token function">install</span> google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest
go <span class="token function">install</span> github.com/meshapi/grpc-api-gateway/codegen/cmd/protoc-gen-openapiv3@latest
go <span class="token function">install</span> github.com/meshapi/grpc-api-gateway/codegen/cmd/protoc-gen-grpc-api-gateway@latest</code><!----></pre> <h3>Step 1: Create a <code>buf</code> Project</h3> <ol><li><p><strong>Initialize the <code>buf</code> Configuration</strong>:</p> <p>Create a <code>buf.yaml</code> file and include the gRPC API Gateway dependency:</p> <pre class="language-yaml"><!----><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> v1
<span class="token key atrule">deps</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">"buf.build/meshapi/grpc-api-gateway"</span></code><!----></pre></li> <li><p><strong>Sync Dependencies</strong>:</p> <p>Run the following command to download the necessary proto files for gRPC API Gateway:</p> <pre class="language-sh"><!----><code class="language-sh">buf mod update</code><!----></pre></li> <li><p><strong>Define the Code Generation Specification</strong>:</p> <p>Create a <code>buf.gen.yaml</code> file with the following content:</p> <pre class="language-yaml"><!----><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> v1
<span class="token key atrule">plugins</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">out</span><span class="token punctuation">:</span> .
    <span class="token key atrule">name</span><span class="token punctuation">:</span> go
    <span class="token key atrule">opt</span><span class="token punctuation">:</span> <span class="token string">"paths=source_relative"</span>
  <span class="token punctuation">-</span> <span class="token key atrule">out</span><span class="token punctuation">:</span> .
    <span class="token key atrule">name</span><span class="token punctuation">:</span> go<span class="token punctuation">-</span>grpc
    <span class="token key atrule">opt</span><span class="token punctuation">:</span> <span class="token string">"paths=source_relative"</span>
  <span class="token punctuation">-</span> <span class="token key atrule">out</span><span class="token punctuation">:</span> .
    <span class="token key atrule">name</span><span class="token punctuation">:</span> grpc<span class="token punctuation">-</span>api<span class="token punctuation">-</span>gateway
    <span class="token key atrule">opt</span><span class="token punctuation">:</span> <span class="token string">"paths=source_relative"</span>
  <span class="token punctuation">-</span> <span class="token key atrule">out</span><span class="token punctuation">:</span> .
    <span class="token key atrule">name</span><span class="token punctuation">:</span> openapiv3
    <span class="token key atrule">opt</span><span class="token punctuation">:</span> <span class="token string">"paths=source_relative"</span></code><!----></pre></li></ol> <h3>Step 2: Define Your Protocol Buffer Service</h3> <p>Create a <code>.proto</code> file to define your gRPC service and messages. Add annotations to map gRPC methods to HTTP endpoints:</p> <pre class="language-proto"><!----><code class="language-proto"><span class="token keyword">syntax</span> <span class="token operator">=</span> <span class="token string">"proto3"</span><span class="token punctuation">;</span>

<span class="token keyword">package</span> main<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string">"meshapi/gateway/annotations.proto"</span><span class="token punctuation">;</span>

<span class="token keyword">option</span> go_package <span class="token operator">=</span> <span class="token string">"/main"</span><span class="token punctuation">;</span>

<span class="token keyword">service</span> <span class="token class-name">UserService</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// Adds a new user. This documentation will appear in the OpenAPI spec.</span>
  <span class="token keyword">rpc</span> <span class="token function">AddUser</span><span class="token punctuation">(</span><span class="token class-name">AddUserRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">AddUserResponse</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">option</span> <span class="token punctuation">(</span>meshapi<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>http<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
      post<span class="token punctuation">:</span> <span class="token string">"/users"</span><span class="token punctuation">,</span>
      body<span class="token punctuation">:</span> <span class="token string">"*"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">message</span> <span class="token class-name">AddUserRequest</span> <span class="token punctuation">&#123;</span>
  <span class="token builtin">string</span> name <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">message</span> <span class="token class-name">AddUserResponse</span> <span class="token punctuation">&#123;</span>
  <span class="token builtin">string</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code><!----></pre> <h3>Step 3: Generate Code</h3> <p>Run the following command to generate the necessary code:</p> <pre class="language-sh"><!----><code class="language-sh">buf generate</code><!----></pre> <p>This will generate Go models, gRPC stubs, the HTTP reverse proxy, and OpenAPI documentation (if configured).</p> <h3>Step 4: Implement the Service and Gateway</h3> <p>Create a Go application to implement the gRPC service and set up the HTTP gateway:</p> <pre class="language-sh"><!----><code class="language-sh">go mod init main</code><!----></pre> <p>Add <code>main.go</code>:</p> <pre class="language-go"><!----><code class="language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"context"</span>
    <span class="token string">"log"</span>
    <span class="token string">"net"</span>
    <span class="token string">"net/http"</span>

    <span class="token string">"github.com/meshapi/grpc-api-gateway/gateway"</span>
    <span class="token string">"google.golang.org/grpc"</span>
    <span class="token string">"google.golang.org/grpc/credentials/insecure"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> UserService <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
    UnimplementedUserServiceServer
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>UserService<span class="token punctuation">)</span> <span class="token function">AddUser</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> req <span class="token operator">*</span>AddUserRequest<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>AddUserResponse<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Received request: %+v"</span><span class="token punctuation">,</span> req<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>AddUserResponse<span class="token punctuation">&#123;</span>Id<span class="token punctuation">:</span> <span class="token string">"someid"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Start the gRPC server</span>
    listener<span class="token punctuation">,</span> err <span class="token operator">:=</span> net<span class="token punctuation">.</span><span class="token function">Listen</span><span class="token punctuation">(</span><span class="token string">"tcp"</span><span class="token punctuation">,</span> <span class="token string">":40000"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>
        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Failed to bind: %s"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    server <span class="token operator">:=</span> grpc<span class="token punctuation">.</span><span class="token function">NewServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">RegisterUserServiceServer</span><span class="token punctuation">(</span>server<span class="token punctuation">,</span> <span class="token operator">&amp;</span>UserService<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Starting gRPC server on port 40000..."</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">:=</span> server<span class="token punctuation">.</span><span class="token function">Serve</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>
            log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Failed to start gRPC server: %s"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// Set up the HTTP gateway</span>
    connection<span class="token punctuation">,</span> err <span class="token operator">:=</span> grpc<span class="token punctuation">.</span><span class="token function">NewClient</span><span class="token punctuation">(</span><span class="token string">":40000"</span><span class="token punctuation">,</span> grpc<span class="token punctuation">.</span><span class="token function">WithTransportCredentials</span><span class="token punctuation">(</span>insecure<span class="token punctuation">.</span><span class="token function">NewCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>
        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Failed to dial gRPC server: %s"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    restGateway <span class="token operator">:=</span> gateway<span class="token punctuation">.</span><span class="token function">NewServeMux</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">RegisterUserServiceHandlerClient</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> restGateway<span class="token punctuation">,</span> <span class="token function">NewUserServiceClient</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">)</span>

    log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Starting HTTP gateway on port 4000..."</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span><span class="token string">":4000"</span><span class="token punctuation">,</span> restGateway<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>
        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Failed to start HTTP gateway: %s"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!----></pre> <h3>Step 5: Run the Service</h3> <p>Start the application:</p> <pre class="language-sh"><!----><code class="language-sh">go mod tidy <span class="token operator">&amp;&amp;</span> go run <span class="token builtin class-name">.</span></code><!----></pre> <h3>Step 6: Test the Service</h3> <p>You can now send a request to the HTTP gateway:</p> <pre class="language-sh"><!----><code class="language-sh"><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST http://localhost:4000/users <span class="token parameter variable">--data</span> <span class="token string">'&#123;"name": "Something"&#125;'</span></code><!----></pre> <p>This will invoke the <code>AddUser</code> gRPC method via the HTTP reverse proxy.</p> <h2>Future Directions</h2> <p>The gRPC API Gateway project has plans for several enhancements:</p> <h3>Dynamic Reflection-Based Proxy</h3> <p>A standalone proxy application that:</p> <ul><li>Uses the gRPC reflection API to discover services at runtime</li> <li>Dynamically constructs HTTP endpoints without code generation</li> <li>Reduces build pipeline complexity</li> <li>Enables faster iteration cycles</li></ul> <h3>Cross-Language Integration</h3> <p>Extending beyond Go with:</p> <ul><li>C-based bridge library for language-agnostic implementation</li> <li>Native bindings for Python, Rust, Node.js, and more</li> <li>Consistent behavior across language ecosystems</li> <li>Simplified integration for polyglot environments</li></ul> <p>For more information and to contribute to the project, visit <a href="https://github.com/meshapi/grpc-api-gateway" rel="nofollow">GitHub</a>.</p><!----></div><!----><!----></div></div> <div class="right-gap svelte-10dujo8"></div></div> <div class="flex flex-row h-0 md:h-16 flex-shrink-0"><div class="gap svelte-10dujo8"></div></div></div></div><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_15ywqcf = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.DeGCcRkJ.js"),
						import("../_app/immutable/entry/app.CzR9BrzO.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data: [null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
</body>

</html>
